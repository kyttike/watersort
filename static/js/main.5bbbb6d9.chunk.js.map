{"version":3,"sources":["Vial.tsx","App.tsx","utils.ts","index.tsx"],"names":["Vial","vialState","selected","onClick","emptySlotsCount","size","length","emptySlots","Array","fill","className","map","_","index","slice","reverse","item","style","backgroundColor","vialData","colors","maxVialSize","result","shuffledColors","array","temporaryValue","randomIndex","resultArray","currentIndex","Math","floor","random","shuffle","flatMap","color","i","push","getRandomGamedata","concat","App","useState","selectedVial","setSelectedVial","gameState","setGameState","selectVial","selectedVialIndex","undefined","newState","sourceIndex","targetIndex","sourceVial","targetVial","console","log","sourceColor","targetColor","pop","newGameState","pourLiquid","vial","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"8OA4BeA,G,YAlBF,SAAC,GAAmD,IAAjDC,EAAgD,EAAhDA,UAAWC,EAAqC,EAArCA,SAAUC,EAA2B,EAA3BA,QAC7BC,EADwD,EAAlBC,KACbJ,EAAUK,OACnCC,EAAaH,EAAkB,EAAII,MAAMJ,GAAiBK,KAAK,MAAQ,GAC7E,OACE,sBAAKC,UAAS,eAAUR,EAAW,iBAAmB,IAAMC,QAASA,EAArE,UACGI,EAAWI,KAAI,SAACC,EAAGC,GAAJ,OACd,qBAAKH,UAAU,eAAf,UAAqCG,EAArC,cAEDZ,EACEa,QACAC,UACAJ,KAAI,SAACK,EAAcH,GAAf,OACH,qBAAKH,UAAU,cAAcO,MAAO,CAAEC,gBAAiBF,IAAvD,UAAuEH,EAAvE,YAAgFG,YCd1F,IAEMG,ECQC,SAA2BC,EAAkBC,GAIlD,IAHA,IAAMC,EAAqB,GAErBC,EArBR,SAAiBC,GAMf,IALA,IAEEC,EACAC,EAHEC,EAAW,YAAOH,GAClBI,EAAeD,EAAYrB,OAIxB,IAAMsB,GACXF,EAAcG,KAAKC,MAAMD,KAAKE,SAAWH,GAGzCH,EAAiBE,EAFjBC,GAAgB,GAGhBD,EAAYC,GAAgBD,EAAYD,GACxCC,EAAYD,GAAeD,EAG7B,OAAOE,EAMgBK,CADEZ,EAAOa,SAAQ,SAACC,GAAD,OAAW1B,MAAMa,GAAaZ,KAAKyB,OAElEC,EAAI,EAAGA,EAAIZ,EAAejB,OAAQ6B,GAAKd,EAC9CC,EAAOc,KAAKb,EAAeT,MAAMqB,EAAGA,EAAId,IAE1C,OAAOC,EDfmBe,CAFb,CAAC,UAAW,UAAW,UAAW,UAAW,UAAW,WACnD,GAC+CC,OAAO,CAAC,GAAI,KAuDhEC,MAhCf,WAAgB,IAAD,EAC2BC,qBAD3B,mBACNC,EADM,KACQC,EADR,OAEqBF,mBAASrB,GAF9B,mBAENwB,EAFM,KAEKC,EAFL,KAGPC,EAAa,SAACC,GAClB,QAAqBC,IAAjBN,EAGG,GAAIK,IAAsBL,EAA1B,CAIL,IAAMO,EAhCO,SAACL,EAAuBM,EAAqBC,GAC9D,IAAMC,EAAaR,EAAUM,GACvBG,EAAaT,EAAUO,GAE7B,IADAG,QAAQC,IAAIH,EAAYC,GANN,IAQZA,EAAW9C,QAAgD,IAAtB6C,EAAW7C,QADzC,CAIX,IAAMiD,EAAcJ,EAAWA,EAAW7C,OAAS,GAC7CkD,EAAcJ,EAAWA,EAAW9C,OAAS,GACnD,GAAIiD,IAAgBC,QAA+BT,IAAhBS,EACjC,MAEFJ,EAAWhB,KAAKe,EAAWM,OAE7B,IAAIC,EAAY,YAAOf,GAGvB,OAFAe,EAAaT,GAAb,YAAgCE,GAChCO,EAAaR,GAAb,YAAgCE,GACzBM,EAccC,CAAWhB,EAAWF,EAAcK,GACrDF,EAAaI,GACbN,OAAgBK,QALhBL,OAAgBK,QAHhBL,EAAgBI,IAYpB,OACE,qBAAKpC,UAAU,iBAAf,SACGiC,EAAUhC,KAAI,SAACiD,EAAM/C,GAAP,OACb,cAAC,EAAD,CAEEZ,UAAW2D,EACXzD,QAAS,kBAAM0C,EAAWhC,IAC1BX,SAAUuC,IAAiB5B,EAC3BR,KAjDU,GA6CLQ,SEjDfgD,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.5bbbb6d9.chunk.js","sourcesContent":["import './Vial.css';\nimport { VialState } from './App';\n\ntype Props = {\n  vialState: VialState;\n  selected: boolean;\n  onClick: () => void;\n  size: number;\n};\n\nconst Vial = ({ vialState, selected, onClick, size }: Props) => {\n  const emptySlotsCount = size - vialState.length;\n  const emptySlots = emptySlotsCount > 0 ? Array(emptySlotsCount).fill(null) : [];\n  return (\n    <div className={`vial ${selected ? 'vial--selected' : ''}`} onClick={onClick}>\n      {emptySlots.map((_, index: number) => (\n        <div className=\"vial-liquid\" key={`${index}-empty`} />\n      ))}\n      {vialState\n        .slice()\n        .reverse()\n        .map((item: string, index: number) => (\n          <div className=\"vial-liquid\" style={{ backgroundColor: item }} key={`${index}-${item}`} />\n        ))}\n    </div>\n  );\n};\n\nexport default Vial;\n","import { useState } from 'react';\nimport './App.css';\nimport Vial from './Vial';\nimport { getRandomGamedata } from './utils';\n\nexport type VialState = string[];\ntype GameState = VialState[];\n\nconst colors = ['#ff4d4d', '#3db33d', '#5656ff', '#eee167', '#fd59e7', '#eea667'];\nconst maxVialSize = 4;\nconst vialData: GameState = getRandomGamedata(colors, maxVialSize).concat([[], []]);\n\nconst pourLiquid = (gameState: string[][], sourceIndex: number, targetIndex: number): GameState => {\n  const sourceVial = gameState[sourceIndex];\n  const targetVial = gameState[targetIndex];\n  console.log(sourceVial, targetVial);\n  while (true) {\n    if (targetVial.length === maxVialSize || sourceVial.length === 0) {\n      break;\n    }\n    const sourceColor = sourceVial[sourceVial.length - 1];\n    const targetColor = targetVial[targetVial.length - 1];\n    if (sourceColor !== targetColor && targetColor !== undefined) {\n      break;\n    }\n    targetVial.push(sourceVial.pop() as string);\n  }\n  let newGameState = [...gameState];\n  newGameState[sourceIndex] = [...sourceVial];\n  newGameState[targetIndex] = [...targetVial];\n  return newGameState;\n};\n\nfunction App() {\n  const [selectedVial, setSelectedVial] = useState<number>();\n  const [gameState, setGameState] = useState(vialData);\n  const selectVial = (selectedVialIndex: number): void => {\n    if (selectedVial === undefined) {\n      setSelectedVial(selectedVialIndex);\n      return;\n    } else if (selectedVialIndex === selectedVial) {\n      setSelectedVial(undefined);\n      return;\n    } else {\n      const newState = pourLiquid(gameState, selectedVial, selectedVialIndex);\n      setGameState(newState);\n      setSelectedVial(undefined);\n    }\n  };\n\n  return (\n    <div className=\"game-container\">\n      {gameState.map((vial, index) => (\n        <Vial\n          key={index}\n          vialState={vial}\n          onClick={() => selectVial(index)}\n          selected={selectedVial === index}\n          size={maxVialSize}\n        />\n      ))}\n    </div>\n  );\n}\n\nexport default App;\n","function shuffle(array: any[]) {\n  let resultArray = [...array];\n  let currentIndex = resultArray.length,\n    temporaryValue,\n    randomIndex;\n\n  while (0 !== currentIndex) {\n    randomIndex = Math.floor(Math.random() * currentIndex);\n    currentIndex -= 1;\n\n    temporaryValue = resultArray[currentIndex];\n    resultArray[currentIndex] = resultArray[randomIndex];\n    resultArray[randomIndex] = temporaryValue;\n  }\n\n  return resultArray;\n}\n\nexport function getRandomGamedata(colors: string[], maxVialSize: number): string[][] {\n  const result: string[][] = [];\n  const duplicatedColors = colors.flatMap((color) => Array(maxVialSize).fill(color));\n  const shuffledColors = shuffle(duplicatedColors);\n  for (let i = 0; i < shuffledColors.length; i += maxVialSize) {\n    result.push(shuffledColors.slice(i, i + maxVialSize));\n  }\n  return result;\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}